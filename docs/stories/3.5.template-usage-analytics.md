# Story 3.5: Template Usage Analytics

## Status

Draft

## Story

**As a** content creator,
**I want** to see which templates I use most frequently,
**so that** I can optimize my template library.

## Acceptance Criteria

1. The Templates page displays templates sorted by usage count (most used first) by default.
2. Each template card shows the `usageCount` and `lastUsedAt` timestamp.
3. A sort dropdown allows sorting by: "Most Used", "Recently Used", "Name (A-Z)", "Date Created".
4. Templates that have never been used display "Never used" instead of a timestamp.
5. The usage count increments each time a template is inserted into the post composer.
6. Analytics are displayed in a clear, visually accessible format (e.g., badge for count, relative time for last used).

## Tasks / Subtasks

- [ ] **Task 1: Add sort dropdown to Templates page** (AC: 3)
- [ ] **Task 2: Implement sorting logic for all sort options** (AC: 1, 3)
- [ ] **Task 3: Display usage count badge on template cards** (AC: 2, 6)
- [ ] **Task 4: Display last used timestamp with relative time** (AC: 2, 4, 6)
- [ ] **Task 5: Handle "Never used" state** (AC: 4)
- [ ] **Task 6: Update getTemplates query to support sorting** (AC: 1, 3)
- [ ] **Task 7: Verify usage tracking from Story 3.4** (AC: 5)
- [ ] **Task 8: Write tests for sorting and display** (AC: 1-6)

## Dev Notes

### Architecture Context

Final story in Epic 3, adds analytics and sorting to complete the template library feature.

**Key Design Decisions:**
- Default sort by "Most Used" to surface frequently used templates
- Relative time display (e.g., "2 days ago") for better UX
- Usage tracking implemented in Story 3.4, verified here

### Component Specifications

**Files to Modify:**
- `components/features/TemplateLibrary.tsx` - Add sort dropdown and analytics display
- `components/features/TemplateCard.tsx` - Add usage count and last used display
- `convex/templates.ts` - Enhance getTemplates query with sort parameter

## Testing

Tests for sorting functionality and analytics display.

## Change Log

| Date       | Version | Description                          | Author     |
| :--------- | :------ | :----------------------------------- | :--------- |
| 2025-11-01 | 1.0     | Initial draft created from Epic 3.5. | Sarah (PO) |

## Dev Agent Record

To be populated by Dev Agent during implementation.

## QA Results

To be populated by QA Agent after implementation review.
