# Story 4.1: Clone Past Post Functionality

## Status

Draft

## Story

**As a** content creator,
**I want** to clone a successful past post,
**so that** I can quickly repurpose content without retyping.

## Acceptance Criteria

1. Published and failed posts in the post history display a "Clone" button/icon.
2. Clicking "Clone" opens the post creation form pre-filled with the original post's content (Twitter and/or LinkedIn), URL, and other metadata.
3. Scheduled times are cleared (not cloned) - user must set new times.
4. The cloned post creates a new record in the `posts` table with status "Draft".
5. A "Cloned from" reference is stored in the new post record linking to the original post ID.
6. Users can edit all fields before scheduling the cloned post.
7. The original post remains unchanged (no modification to source post).

## Tasks / Subtasks

- [ ] **Task 1: Add "Clone" button to PostHistory component** (AC: 1)
- [ ] **Task 2: Create clonePost mutation in convex/posts.ts** (AC: 4, 5, 7)
- [ ] **Task 3: Implement clone handler in PostHistory** (AC: 2, 3)
- [ ] **Task 4: Open post composer with cloned data** (AC: 2, 6)
- [ ] **Task 5: Add clonedFromId field to posts schema** (AC: 5)
- [ ] **Task 6: Verify original post unchanged** (AC: 7)
- [ ] **Task 7: Write tests for clone functionality** (AC: 1-7)

## Dev Notes

### Architecture Context

First story in Epic 4 (Content Recycling), enables basic post cloning as foundation for recurring queues.

### Data Models

**Modify posts table:**
- Add optional `clonedFromId: v.optional(v.id("posts"))` field

## Testing

Tests for cloning published and failed posts, verifying draft status and cleared times.

## Change Log

| Date       | Version | Description                          | Author     |
| :--------- | :------ | :----------------------------------- | :--------- |
| 2025-11-01 | 1.0     | Initial draft created from Epic 4.1. | Sarah (PO) |

## Dev Agent Record

To be populated by Dev Agent during implementation.

## QA Results

To be populated by QA Agent after implementation review.
