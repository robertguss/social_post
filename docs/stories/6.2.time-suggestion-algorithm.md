# Story 6.2: Time Suggestion Algorithm (Platform-Aware)

## Status

Draft

## Story

**As an** engineer,
**I want** an algorithm that calculates optimal posting times based on the user's selected date and platform,
**so that** intelligent suggestions can be presented in the UI.

## Acceptance Criteria

1. A Convex query `getRecommendedTimes` accepts parameters: `date`, `platform`, and `userTimezone`.
2. The query retrieves recommendations for the specified platform and day of week.
3. Recommendations are sorted by `engagementScore` (highest first).
4. The query returns the top 3 time suggestions converted to the user's local timezone.
5. If no recommendations exist for the specific day/platform, fallback to general recommendations (e.g., "mid-morning" as a default).
6. Time suggestions avoid conflicts with the user's already scheduled posts (optional check).
7. The algorithm considers the user's posting history to avoid suggesting times they never use (future enhancement placeholder).

## Tasks / Subtasks

- [ ] **Task 1: Create getRecommendedTimes query** (AC: 1, 2)
- [ ] **Task 2: Implement engagement score sorting** (AC: 3)
- [ ] **Task 3: Limit results to top 3 suggestions** (AC: 4)
- [ ] **Task 4: Implement timezone conversion** (AC: 4)
- [ ] **Task 5: Add fallback recommendations** (AC: 5)
- [ ] **Task 6: Optional conflict checking** (AC: 6)
- [ ] **Task 7: Write tests for algorithm** (AC: 1-7)

## Dev Notes

Builds on Story 6.1 (data model) to create intelligent time suggestion algorithm.

## Change Log

| Date       | Version | Description                          | Author     |
| :--------- | :------ | :----------------------------------- | :--------- |
| 2025-11-01 | 1.0     | Initial draft created from Epic 6.2. | Sarah (PO) |

## Dev Agent Record

To be populated by Dev Agent during implementation.

## QA Results

To be populated by QA Agent after implementation review.
